import{z as F,L as A,Q as S,A as L,d as n,P as $,E as O,ax as V,K as W,ad as j,ay as G,g as Q,e as H,a9 as I,aa as J,a5 as X,az as Y,aA as Z,aB as T,aC as ee,aD as te,aE as ne,ab as oe,q as ae,aF as se,aG as le,_ as ce,u as re,ai as ie,aH as de,f as ue,h as me,o as y,c as v,a as B,F as fe,r as Ce,t as he,w as ge,k as Be,p as _e,j as be}from"./index-ed287d35.js";import{C as pe}from"./index-a322abc9.js";import"./index-446dc429.js";import{C as we}from"./index-c79f315e.js";import{_ as N}from"./Header-0bffad9e.js";import{B as x}from"./index-653ff191.js";import{a as E,b as ye}from"./index-3c654656.js";import"./use-route-f75f7c81.js";import"./use-placeholder-62b09b72.js";const[ve,D,k]=F("contact-card"),ke={tel:String,name:String,type:A("add"),addText:String,editable:S};var Se=L({name:ve,props:ke,emits:["click"],setup(e,{emit:o}){const a=r=>{e.editable&&o("click",r)},s=()=>e.type==="add"?e.addText||k("addContact"):[n("div",null,[`${k("name")}：${e.name}`]),n("div",null,[`${k("tel")}：${e.tel}`])];return()=>n(we,{center:!0,icon:e.type==="edit"?"contact":"add-square",class:D([e.type]),border:!1,isLink:e.editable,titleClass:D("title"),onClick:a},{title:s})}});const xe=$(Se),[Pe,i,b]=F("dialog"),Oe=O({},V,{title:String,theme:String,width:W,message:[String,Function],callback:Function,allowHtml:Boolean,className:j,transition:A("van-dialog-bounce"),messageAlign:String,closeOnPopstate:S,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:S,closeOnClickOverlay:Boolean}),Te=[...G,"transition","closeOnPopstate"];var R=L({name:Pe,props:Oe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:o,slots:a}){const s=Q(),r=H({confirm:!1,cancel:!1}),g=t=>o("update:show",t),f=t=>{var c;g(!1),(c=e.callback)==null||c.call(e,t)},C=t=>()=>{e.show&&(o(t),e.beforeClose?(r[t]=!0,oe(e.beforeClose,{args:[t],done(){f(t),r[t]=!1},canceled(){r[t]=!1}})):f(t))},l=C("cancel"),d=C("confirm"),h=Z(t=>{var c,u;if(t.target!==((u=(c=s.value)==null?void 0:c.popupRef)==null?void 0:u.value))return;({Enter:e.showConfirmButton?d:T,Escape:e.showCancelButton?l:T})[t.key](),o("keydown",t)},["enter","esc"]),p=()=>{const t=a.title?a.title():e.title;if(t)return n("div",{class:i("header",{isolated:!e.message&&!a.default})},[t])},K=t=>{const{message:c,allowHtml:u,messageAlign:m}=e,_=i("message",{"has-title":t,[m]:m}),w=ee(c)?c():c;return u&&typeof w=="string"?n("div",{class:_,innerHTML:w},null):n("div",{class:_},[w])},U=()=>{if(a.default)return n("div",{class:i("content")},[a.default()]);const{title:t,message:c,allowHtml:u}=e;if(c){const m=!!(t||a.title);return n("div",{key:u?1:0,class:i("content",{isolated:!m})},[K(m)])}},z=()=>n("div",{class:[ne,i("footer")]},[e.showCancelButton&&n(x,{size:"large",text:e.cancelButtonText||b("cancel"),class:i("cancel"),style:{color:e.cancelButtonColor},loading:r.cancel,disabled:e.cancelButtonDisabled,onClick:l},null),e.showConfirmButton&&n(x,{size:"large",text:e.confirmButtonText||b("confirm"),class:[i("confirm"),{[te]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:r.confirm,disabled:e.confirmButtonDisabled,onClick:d},null)]),q=()=>n(ye,{class:i("footer")},{default:()=>[e.showCancelButton&&n(E,{type:"warning",text:e.cancelButtonText||b("cancel"),class:i("cancel"),color:e.cancelButtonColor,loading:r.cancel,disabled:e.cancelButtonDisabled,onClick:l},null),e.showConfirmButton&&n(E,{type:"danger",text:e.confirmButtonText||b("confirm"),class:i("confirm"),color:e.confirmButtonColor,loading:r.confirm,disabled:e.confirmButtonDisabled,onClick:d},null)]}),M=()=>a.footer?a.footer():e.theme==="round-button"?q():z();return()=>{const{width:t,title:c,theme:u,message:m,className:_}=e;return n(Y,I({ref:s,role:"dialog",class:[i([u]),_],style:{width:X(t)},tabindex:0,"aria-labelledby":c||m,onKeydown:h,"onUpdate:show":g},J(e,Te)),{default:()=>[p(),U(),M()]})}}});let P;const Ee={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let De=O({},Ee);function Fe(){({instance:P}=se({setup(){const{state:o,toggle:a}=le();return()=>n(R,I(o,{"onUpdate:show":a}),null)}}))}function Ae(e){return ae?new Promise((o,a)=>{P||Fe(),P.open(O({},De,e,{callback:s=>{(s==="confirm"?o:a)(s)}}))}):Promise.resolve()}$(R);const Le={components:{Header:N},setup(){const e=re(),o=ie(),a=de(),s=H({name:"泥煤滴",tel:"13888888888",totalPrice:0}),r=()=>{e.push("/address")},g=()=>{let l=0;o.state.orderOptions.orderList.length&&o.state.orderOptions.orderList.forEach(d=>{l+=d.price*d.num}),s.totalPrice=l},f=()=>{o.state.addressOptions.userAddress.forEach(l=>{l.isDefault&&(s.name=l.name,s.tel=l.tel)})},C=()=>{Ae({title:"提示",message:"生产订单成功"}).then(()=>{let l=o.state.addCartOptions.carList.filter(d=>a.query.list.includes(d.id+""));o.commit("addCartOptions/delete",l),o.commit("orderOptions/orderListEnd"),e.push("/order")})};return ue(()=>{g(),f()}),{...me(s),onEdit:r,store:o,handleCreateorder:C}}},$e=e=>(_e("data-v-882becb2"),e=e(),be(),e),He={class:"create-order"},Ie={class:"content"},Ne={class:"pay-wrap"},Re={class:"price"},Ke=$e(()=>B("span",null,"商品金额",-1));function Ue(e,o,a,s,r,g){const f=N,C=xe,l=pe,d=x;return y(),v("div",He,[n(f,{title:"生成订单"}),n(C,{type:"edit",tel:e.tel,name:e.name,onClick:s.onEdit},null,8,["tel","name","onClick"]),B("div",Ie,[(y(!0),v(fe,null,Ce(s.store.state.orderOptions.orderList,(h,p)=>(y(),v("div",{key:p},[n(l,{num:h.num,price:h.price,title:h.title,thumb:h.pic},null,8,["num","price","title","thumb"])]))),128))]),B("div",Ne,[B("div",Re,[Ke,B("span",null,"￥"+he(e.totalPrice),1)]),n(d,{type:"primary",class:"pay-btn",block:"",onClick:s.handleCreateorder},{default:ge(()=>[Be("生成订单")]),_:1},8,["onClick"])])])}const Xe=ce(Le,[["render",Ue],["__scopeId","data-v-882becb2"]]);export{Xe as default};
