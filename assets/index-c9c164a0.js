import{_ as w}from"./Footer-3f72b0ef.js";import{_ as O}from"./Empty-7829aac8.js";import{_ as V}from"./Header-0bffad9e.js";import{P as D,z as E,L as y,M as U,Q as $,A as H,g as I,d as a,I as M,_ as P,ai as A,u as R,e as q,C as z,f as T,h as G,o as h,c as k,a as g,w as C,F as Q,r as j,i as v,k as B,am as J,an as L,b as K}from"./index-ed287d35.js";import{s as W,_ as N,C as X}from"./ListItem-43a05cee.js";import"./index-157f7c35.js";import{B as Y}from"./index-653ff191.js";import{u as Z}from"./use-placeholder-62b09b72.js";import"./use-route-f75f7c81.js";const ee=D(W),[te,i,ne]=E("submit-bar"),oe={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:y("¥"),disabled:Boolean,textAlign:String,buttonText:String,buttonType:y("danger"),buttonColor:String,suffixLabel:String,placeholder:Boolean,decimalLength:U(2),safeAreaInsetBottom:$};var ae=H({name:te,props:oe,emits:["submit"],setup(t,{emit:n,slots:s}){const e=I(),b=Z(e,i),f=()=>{const{price:o,label:r,currency:c,textAlign:l,suffixLabel:m,decimalLength:x}=t;if(typeof o=="number"){const S=(o/100).toFixed(+x).split("."),F=x?`.${S[1]}`:"";return a("div",{class:i("text"),style:{textAlign:l}},[a("span",null,[r||ne("label")]),a("span",{class:i("price")},[c,a("span",{class:i("price-integer")},[S[0]]),F]),m&&a("span",{class:i("suffix-label")},[m])])}},p=()=>{var o;const{tip:r,tipIcon:c}=t;if(s.tip||r)return a("div",{class:i("tip")},[c&&a(M,{class:i("tip-icon"),name:c},null),r&&a("span",{class:i("tip-text")},[r]),(o=s.tip)==null?void 0:o.call(s)])},_=()=>n("submit"),d=()=>s.button?s.button():a(Y,{round:!0,type:t.buttonType,text:t.buttonText,class:i("button",t.buttonType),color:t.buttonColor,loading:t.loading,disabled:t.disabled,onClick:_},null),u=()=>{var o,r;return a("div",{ref:e,class:[i(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(o=s.top)==null?void 0:o.call(s),p(),a("div",{class:i("bar")},[(r=s.default)==null?void 0:r.call(s),f(),d()])])};return()=>t.placeholder?b(u):u()}});const se=D(ae);const ce={components:{ListItem:N},props:["changeShow"],setup(t){const n=A(),s=R(),e=q({checked:[],submitChecked:!0}),b=(c,l)=>{n.state.addCartOptions.carList.map(m=>{m.id===l.name&&(m.num=c)})},f=()=>{e.checked=n.state.addCartOptions.carList.map(c=>c.id)},p=()=>{e.checked.length?(n.commit("orderOptions/pay",o()),s.push({path:"/createOrder",query:{list:e.checked}})):L("请选择要付款的商品")},_=()=>{e.checked.length!==n.state.addCartOptions.carList.length?f():e.checked=[]},d=c=>{c.length===n.state.addCartOptions.carList.length?e.submitChecked=!0:e.submitChecked=!1,e.checked=c},u=z(()=>{let c=o(),l=0;return c.forEach(m=>{l+=m.num*m.price}),l*100}),o=c=>n.state.addCartOptions.carList.filter(l=>c==="delete"?!e.checked.includes(l.id):e.checked.includes(l.id)),r=()=>{e.checked.length?(n.commit("addCartOptions/delete",o("delete")),e.checked=[],n.state.addCartOptions.carList.length||(t.changeShow(),n.commit("addCartOptions/edit","delete"))):L("请选择删除商品")};return T(()=>{f()}),{...G(e),store:n,handleChange:b,onSubmit:p,choseAll:_,groundChange:d,allPrce:u,handleDelete:r}}},re={class:"cartDetail"},ie={class:"content"},le={class:"buy"},de={class:"left"};function ue(t,n,s,e,b,f){const p=N,_=ee,d=X,u=se;return h(),k("div",re,[g("div",ie,[a(_,{modelValue:t.checked,"onUpdate:modelValue":n[0]||(n[0]=o=>t.checked=o),onChange:e.groundChange},{default:C(()=>[(h(!0),k(Q,null,j(e.store.state.addCartOptions.carList,(o,r)=>(h(),k("div",{key:r},[a(p,{item:o,showCheckBox:!0,handleChange:e.handleChange},null,8,["item","handleChange"])]))),128))]),_:1},8,["modelValue","onChange"]),e.store.state.addCartOptions.isDelete?(h(),v(u,{key:0,price:e.allPrce,"button-text":"提交订单",onSubmit:e.onSubmit,class:"submit-all"},{default:C(()=>[a(d,{modelValue:t.submitChecked,"onUpdate:modelValue":n[1]||(n[1]=o=>t.submitChecked=o),"checked-color":"#ffc400",onClick:e.choseAll},{default:C(()=>[B("全选")]),_:1},8,["modelValue","onClick"])]),_:1},8,["price","onSubmit"])):J("",!0),g("div",le,[g("div",de,[a(d,{modelValue:t.submitChecked,"onUpdate:modelValue":n[2]||(n[2]=o=>t.submitChecked=o),"checked-color":"#ffc400",onClick:e.choseAll},{default:C(()=>[B("全选")]),_:1},8,["modelValue","onClick"])]),g("div",{class:"delete",onClick:n[3]||(n[3]=(...o)=>e.handleDelete&&e.handleDelete(...o))},"删除")])])])}const me=P(ce,[["render",ue],["__scopeId","data-v-f27d8b58"]]);const pe={components:{Footer:w,Empty:O,Header:V,CartDetial:me},setup(){const t=I(!0),n=A(),s=()=>{n.state.addCartOptions.carList.length===0&&(t.value=!1)},e=()=>{t.value=!1};return T(()=>{s()}),{isShow:t,changeShow:e}}},_e={class:"cart"};function he(t,n,s,e,b,f){const p=V,_=K("CartDetial"),d=O,u=w;return h(),k("div",_e,[a(p,{title:"购物车",edit:!0}),e.isShow?(h(),v(_,{key:0,changeShow:e.changeShow},null,8,["changeShow"])):(h(),v(d,{key:1})),a(u)])}const Be=P(pe,[["render",he],["__scopeId","data-v-1179fa4a"]]);export{Be as default};
