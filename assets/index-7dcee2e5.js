import{z as x,E,K as N,ad as G,A as C,ac as D,d,a9 as L,S as V,I as S,P as k,U as J,M as g,ao as q,L as Q,a5 as W,_ as P,o as v,c as h,a as m,t as I,i as y,e as O,h as T,w as b,F,r as R,f as X,ai as Z,u as ee,b as te,k as ne,an as ae,p as se,j as oe}from"./index-ed287d35.js";import{T as ie,a as ce}from"./index-7bb4b073.js";import{_ as U}from"./Header-0bffad9e.js";import{S as de,_ as j}from"./ListItem-43a05cee.js";import{a as K,u as H}from"./use-route-f75f7c81.js";import{a as le}from"./api-0c870349.js";import{A as re,a as ue,b as _e}from"./index-3c654656.js";import"./use-id-bf90b298.js";import"./index-157f7c35.js";import"./use-placeholder-62b09b72.js";import"./index-653ff191.js";const[me,A]=x("action-bar-icon"),ve=E({},K,{dot:Boolean,text:String,icon:String,color:String,badge:N,iconClass:G,badgeProps:Object,iconPrefix:String});var fe=C({name:me,props:ve,setup(e,{slots:n}){const a=H();D(re);const c=()=>{const{dot:r,badge:u,icon:s,color:i,iconClass:o,badgeProps:t,iconPrefix:l}=e;return n.icon?d(V,L({dot:r,class:A("icon"),content:u},t),{default:n.icon}):d(S,{tag:"div",dot:r,name:s,badge:u,color:i,class:[A("icon"),o],badgeProps:t,classPrefix:l},null)};return()=>d("div",{role:"button",class:A(),tabindex:0,onClick:a},[c(),n.default?n.default():e.text])}});const he=k(fe),[M,pe]=x("sidebar"),Y=Symbol(M),ge={modelValue:g(0)};var be=C({name:M,props:ge,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{linkChildren:c}=J(Y),r=()=>+e.modelValue;return c({getActive:r,setActive:s=>{s!==r()&&(n("update:modelValue",s),n("change",s))}}),()=>{var s;return d("div",{role:"tablist",class:pe()},[(s=a.default)==null?void 0:s.call(a)])}}});const Ie=k(be),[xe,w]=x("sidebar-item"),Ce=E({},K,{dot:Boolean,title:String,badge:N,disabled:Boolean,badgeProps:Object});var ke=C({name:xe,props:Ce,emits:["click"],setup(e,{emit:n,slots:a}){const c=H(),{parent:r,index:u}=D(Y);if(!r)return;const s=()=>{e.disabled||(n("click",u.value),r.setActive(u.value),c())};return()=>{const{dot:i,badge:o,title:t,disabled:l}=e,_=u.value===r.getActive();return d("div",{role:"tab",class:w({select:_,disabled:l}),tabindex:l?void 0:0,"aria-selected":_,onClick:s},[d(V,L({dot:i,class:w("text"),content:o},e.badgeProps),{default:()=>[a.title?a.title():t]})])}}});const Ae=k(ke),[ye,p]=x("tree-select"),Se={max:g(1/0),items:q(),height:g(300),selectedIcon:Q("success"),mainActiveIndex:g(0),activeId:{type:[Number,String,Array],default:0}};var Pe=C({name:ye,props:Se,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(e,{emit:n,slots:a}){const c=t=>Array.isArray(e.activeId)?e.activeId.includes(t):e.activeId===t,r=t=>{const l=()=>{if(t.disabled)return;let _;if(Array.isArray(e.activeId)){_=e.activeId.slice();const f=_.indexOf(t.id);f!==-1?_.splice(f,1):_.length<e.max&&_.push(t.id)}else _=t.id;n("update:activeId",_),n("clickItem",t)};return d("div",{key:t.id,class:["van-ellipsis",p("item",{active:c(t.id),disabled:t.disabled})],onClick:l},[t.text,c(t.id)&&d(S,{name:e.selectedIcon,class:p("selected")},null)])},u=t=>{n("update:mainActiveIndex",t)},s=t=>n("clickNav",t),i=()=>{const t=e.items.map(l=>d(Ae,{dot:l.dot,title:l.text,badge:l.badge,class:[p("nav-item"),l.className],disabled:l.disabled,onClick:s},null));return d(Ie,{class:p("nav"),modelValue:e.mainActiveIndex,onChange:u},{default:()=>[t]})},o=()=>{if(a.content)return a.content();const t=e.items[+e.mainActiveIndex]||{};if(t.children)return t.children.map(r)};return()=>d("div",{class:p(),style:{height:W(e.height)}},[i(),d("div",{class:p("content")},[o()])])}});const $e=k(Pe);const Be={props:["item","handleAdd","handleChange"]},we={class:"content-item"},Ee={class:"left"},Ne=["src"],De={class:"text"},Le={class:"title"},Ve={class:"price"};function Oe(e,n,a,c,r,u){const s=S,i=de;return v(),h("div",we,[m("div",Ee,[m("img",{src:a.item.pic},null,8,Ne),m("div",De,[m("div",Le,I(a.item.title),1),a.item.add?(v(),y(s,{key:0,name:"add-o",onClick:n[0]||(n[0]=o=>a.handleAdd(a.item.id))})):(v(),y(i,{key:1,modelValue:a.item.num,"onUpdate:modelValue":n[1]||(n[1]=o=>a.item.num=o),onChange:a.handleChange,name:"item.id"},null,8,["modelValue","onChange"]))]),m("div",Ve,"￥"+I(a.item.price),1)])])}const Te=P(Be,[["render",Oe],["__scopeId","data-v-c062b5ce"]]);const Fe={components:{FoodListitems:Te,ListItem:j},props:["foodsdatas","index"],setup(e){let n=O({activeIndex:0,items:[],subItem:[]});const a=()=>{var i,o;let s=[];(o=(i=e.foodsdatas)==null?void 0:i.items)==null||o.forEach((t,l)=>{s.push({text:t.text}),n.activeIndex===l&&(n.subItem=t.children)}),n.items=s};a();const c=s=>{n.activeIndex=s,a()},r=s=>{n.subItem.forEach((i,o)=>{i.id===s&&(i.add=!1,i.num+=1)})},u=(s,i)=>{n.subItem.forEach(o=>{o.id===i.name&&(o.num=s)})};return{...T(n),navClick:c,handleAdd:r,handleChange:u}}},Re={key:0,class:"food-list"},Ue={key:1,class:"elseDive"};function je(e,n,a,c,r,u){const s=j,i=$e;return a.index===0?(v(),h("div",Re,[d(i,{onClickNav:c.navClick,"main-active-index":e.activeIndex,"onUpdate:main-active-index":n[0]||(n[0]=o=>e.activeIndex=o),height:"85vw",items:e.items},{content:b(()=>[(v(!0),h(F,null,R(e.subItem,(o,t)=>(v(),h("div",{key:t,class:"item-bg"},[d(s,{item:o,handleAdd:c.handleAdd,handleChange:c.handleChange,showCheckBox:!1},null,8,["item","handleAdd","handleChange"])]))),128))]),_:1},8,["onClickNav","main-active-index","items"])])):(v(),h("div",Ue,I(a.foodsdatas.content),1))}const Ke=P(Fe,[["render",je],["__scopeId","data-v-3e0a6819"]]);const He={components:{Header:U,FoodsList:Ke},setup(){let e=O({title:"鱼拿酸菜鱼",img:"https://img1.baidu.com/it/u=1599947592,1695977044&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=440",storeData:[]});const n=()=>{le().then(i=>{e.storeData=i})};X(()=>{n()});const a=Z(),c=ee(),r=i=>{let o=a.state.addCartOptions.carList||[];if(e.storeData.forEach(t=>{var l;(l=t.data.items)==null||l.forEach(_=>{_.children.forEach(f=>{f.num>0&&o.push(f)})})}),o.length===0){ae("请选择商品");return}a.commit("addCartOptions/addCart",o),i==="buy"&&u()},u=()=>{c.push("/cart")},s=()=>{r("buy")};return{store:a,...T(e),handelCart:r,goCart:u,goBuy:s}}},z=e=>(se("data-v-35eae944"),e=e(),oe(),e),Me={class:"storeDetails"},Ye={class:"content"},ze=z(()=>m("div",{class:"img"},null,-1)),Ge={class:"foodSort"},Je=z(()=>m("div",{class:"sort"},null,-1)),qe={class:"name"},Qe=["src"];function We(e,n,a,c,r,u){const s=U,i=te("foods-list"),o=ie,t=ce,l=he,_=ue,f=_e;return v(),h("div",Me,[d(s,{title:"店铺"}),m("div",Ye,[ze,m("div",Ge,[Je,m("div",qe,[ne(I(e.title)+" ",1),m("img",{src:e.img,class:"store-img"},null,8,Qe)]),d(t,{color:"#ffc400"},{default:b(()=>[(v(!0),h(F,null,R(e.storeData,($,B)=>(v(),y(o,{key:B,title:$.name},{default:b(()=>[d(i,{foodsdatas:$.data,index:B},null,8,["foodsdatas","index"])]),_:2},1032,["title"]))),128))]),_:1})])]),d(f,null,{default:b(()=>[d(l,{icon:"chat-o",text:"客服"}),d(l,{icon:"cart-o",text:"购物车",badge:c.store.state.addCartOptions.carList.length,onClick:c.goCart},null,8,["badge","onClick"]),d(_,{type:"warning",text:"加入购物车",onClick:c.handelCart},null,8,["onClick"]),d(_,{type:"danger",text:"立即购买",onClick:c.goBuy},null,8,["onClick"])]),_:1})])}const lt=P(He,[["render",We],["__scopeId","data-v-35eae944"]]);export{lt as default};
